
<!--
  Generated template for the ShopPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Julkaisumyynti</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
<div class="row">

  <!-- Vasen sarake: Ostoskori-->
  <div class="column_1">

    <table style="width:100%">
      <tr><td class="align-right">
      <h5>Ostoskorissa {{productsInCart}} tuotetta, yhteensä {{totalSumAsString}} euroa</h5>
      </td></tr>
    </table>

    <!-- Ostoskori päänäkymä-->
    <table class="cart" style="width:100%">
      <tr>
        <th>Nimi</th>
        <th class="th_narrow_centered">Varastosaldo</th>
        <th class="th_narrow_centered">Hinta</th>
        <th class="th_narrow_centered"></th>
        <th class="th_narrow_centered">Määrä</th>
        <th class="th_narrow_centered"></th>
        <th class="th_narrow_centered">Yht.</th>
        <th class="th_narrow_centered">Poista</th>
      </tr>
      <tr  *ngFor="let item of cartContent let i = index">
        <td>{{item.productName}}</td>
        <td class="counter_cell">{{item.amountInStock}}</td>
        <td>{{item.priceAsString}}</td>
        <td class="counter_cell">
          <button ion-button class="product_line_button" (click)="increase(item.productName, i)">
            <ion-icon name="add" item-start></ion-icon>
          </button>
        </td>
        <td class="counter_cell">{{item.quantity}}</td>
        <td class="counter_cell">
          <button ion-button class="product_line_button" (click)="decrease(item.productName, i)">
            <ion-icon name="remove" item-start></ion-icon>
          </button>
        </td>
        <td>{{item.totalAsString}}</td>
        <td class="counter_cell">
          <button ion-button class="product_line_button" (click)="removeProduct(item.productName, i)">
            <ion-icon name="trash" item-start></ion-icon>
          </button>
        </td>
      </tr>
    </table>

    <!-- Tuotteen syöttökentät-->
    <table class="table_2">
      <tr>
        <td>
          <ion-input class="product_data_input" [(ngModel)]="productNameInitials" placeholder="Tuotteen nimi" (click)="onProductInputClicked()" (ionChange)="onProductNameUpdated()" name="productName"></ion-input>
        </td>
        <td>
          <ion-input type="number" class="product_data_input" [(ngModel)]="productNumberInitials" placeholder="Tuotenumero" (click)="onProductInputClicked()" (ionChange)="onProductNumberUpdated()" name="productNumber"></ion-input>
        </td>
      </tr>
      <tr  *ngFor="let element of searchResult; let i = index" (click)="onProductSelected(element.productName, i)" >
        <td>
          {{element.productName}}
        </td>
        <td>
          {{element.ISBN}}
        </td>
      </tr>
    </table>
  </div>

  <!-- Oikea sarake: Tuotteen maksu-->
  <div class="column_2" style="background-color:#bbb;">
  	<div style="background-color:#bbb;">
  	<!--button ion-button id="cashier_button" (click)="getCashiers()">
      Kassat
    </button-->

	<ion-item>
  		<ion-label>Kassa:</ion-label>
  		<ion-select (ionChange)="onCashierChange($event)">
   			<ion-option *ngFor="let cashier of cashiers">{{cashier.firstName}}</ion-option>
  		</ion-select>
	</ion-item>

  	</div>
    <h2>Maksaminen</h2>
    <button ion-button id="connect_pt_button" (click)="connectToPT()">
      Yhdistä maksupäätteeseen
    </button><p>
    <table style="width:100%">
      <tr>
        <td>
          <button ion-button class="payment_button" id="card_button" [disabled]="checkIfCardPaymentEnabled()" (click)="cardPayment()">
            <ion-icon name="card" item-start> Korttimaksu</ion-icon>
          </button>
        </td>
        <td>
          <button ion-button class="payment_button" id="cash_button" [disabled]="checkIfCashPaymentEnabled()" (click)="cashPayment()">
            <ion-icon name="cash" item-start> Käteinen</ion-icon>
          </button>
        </td>
      </tr>
      <tr>
        <td>
          <div id="card_payment_guide">
            Näppäile summa {{totalSum}} kortinlukijaan. Kun maksu on hyväksytty, paina Vahvista.
          </div>
        </td>
        <td>
          <div id="cash_payment_guide">
            <tr><td>Maksettu:</td></tr>
            <tr><td>
              <ion-input class="product_data_input" [(ngModel)]="givenAmount" (ionChange)="onGivenAmountUpdated()" name="productName"></ion-input>
            </td></tr>
            <tr><td>Takaisin:</td></tr>
            <tr><td>{{cashBack}}</td></tr>
          </div>
        </td>
      </tr>
    </table>
    <p>
    <table class="confirm_buttons" style="width:100%" bordercolor="#bbb">
      <tr bordercolor="#bbb">
        <td bordercolor="#bbb">
          <button ion-button class="confirm_button" id="confirm_payment_button" [disabled]="checkIfConfirmButtonsEnabled()" (click)="confirmPayment()">
            <ion-icon name="checkbox" item-start> Vahvista</ion-icon>
          </button>
        </td>
        <td bordercolor="#bbb">
          <button ion-button class="cancel_button" id="cancel_payment_button" [disabled]="checkIfConfirmButtonsEnabled()" (click)="cancelPurchase()">
            <ion-icon name="close" item-start> Peruuta</ion-icon>
          </button>
        </td>
      </tr>
    </table>


    <!-- receipt -->
    <div id="receipt_view">
      <p>Kuitti:<p>
      <table class="receipt" style="width:100%">
        <tr>
          <th>Tuote</th>
          <th>Hinta</th>
          <th>Määrä</th>
          <th>Yht.</th>
        </tr>
        <tr  *ngFor="let item of receiptContent let i = index">
          <td>{{item.productName}}</td>
          <td>{{item.priceAsString}}</td>
          <td>{{item.quantity}}</td>
          <td>{{item.totalAsString}}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <th>{{receiptTotalSumAsString}}</th>
        </tr>
      </table>
    </div>
  </div>
</div>
</ion-content>
  <!--ion-content-->
  <!--
  <div class="ion-list-viewport">
    <ion-list class="product_list">
      <ion-item text-wrap *ngFor="let element of searchResult; let i = index" (click)="onProductSelected(element.productName, i)" >      
        <p>{{element.productName}}</p>
      </ion-item>
    </ion-list>
  </div>
  -->
  <!--/ion-content-->
  <!--button ion-button secondary menuToggle>Toggle Menu</button-->

